<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Comparably</title>

    <link rel="stylesheet" href="bower_components/normalize-css/normalize.css" />
    <link rel="stylesheet" href="src/base.css" />

    <link href='http://fonts.googleapis.com/css?family=Lobster' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Patua+One' rel='stylesheet' type='text/css'>

    <link rel="import" href="src/comparably-header.html" />
    <link rel="import" href="src/lozenge-list.html" />
    <link rel="import" href="src/comparison-lozenge.html" />
    <link rel="import" href="src/item-facet.html" />
</head>
<body>
    <comparably-header></comparably-header>

    <lozenge-list data-bind="foreach: items">
        <comparison-lozenge data-bind="event: { 'add-facet': addFacet }">
            <lozenge-banner data-bind="editableText: name"></lozenge-banner>
            <!-- ko foreach: facets -->
                <item-facet data-bind="attr: { score: score },
                                       editableText: description">
                </item-facet>
            <!-- /ko -->
        </comparison-lozenge>
    </lozenge-list>

    <script src="bower_components/knockout/dist/knockout.debug.js"></script>
    <script src="bower_components/knockout-mapping/knockout.mapping.js"></script>

    <script src="src/editable-binding.js"></script>
    <script src="src/ItemViewModel.js"></script>
    <script src="src/FacetViewModel.js"></script>

    <script>
        (function () {
            var initialData = {
                facets: [{ id: 0, name: "Goodness" },
                         { id: 1, name: "Niceness" },
                         { id: 2, name: "Greatness" }],
                items: [{ name: "Best item",
                    facets: [{id: 0, description: "Not bad", score: 50},
                             {id: 1, description: "Better", score: 70},
                             {id: 2, description: "Very very good", score: 99}]},
                    { name: "Another item",
                        facets: [{id: 0, description: "Terrible", score: 20},
                                 {id: 1, description: "A bit better", score: 60},
                                 {id: 2, description: "Very good", score: 90}]}
                ]
            };

            initialData.items = initialData.items.map(function (item) {
                return new ItemViewModel(item);
            });

            ko.applyBindings(initialData, document.querySelector("lozenge-list"));
        })();
    </script>
</body>
</html>
